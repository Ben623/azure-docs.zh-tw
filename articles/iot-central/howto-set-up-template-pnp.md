---
title: 在 Azure IoT Central 應用程式中設定裝置範本 | Microsoft Docs
description: 了解如何使用量測、設定、屬性、規則和儀表板來設定裝置範本。
author: sarahhubbard
ms.author: sahubbar
ms.date: 07/23/2019
ms.topic: conceptual
ms.service: iot-central
services: iot-central
manager: peterpr
ms.openlocfilehash: fd7cd8f73f602953573b7e6edab32bf2a6aecc05
ms.sourcegitcommit: 4b8a69b920ade815d095236c16175124a6a34996
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/23/2019
ms.locfileid: "69998128"
---
# <a name="set-up-and-manage-a-device-template-preview-features"></a>設定和管理裝置範本 (預覽功能)

[!INCLUDE [iot-central-pnp-original](../../includes/iot-central-pnp-original-note.md)]

裝置範本是一份藍圖，可為連線至 Azure IoT Central 應用程式的某種裝置，定義其所具有的特性和行為。

例如, 產生器可以針對具有下列特性的連線風扇建立裝置範本:

- 傳送溫度遙測
- 傳送位置屬性
- 傳送風扇馬達錯誤事件
- 傳送風扇操作狀態
- 可寫入的風扇速度屬性
- 重新開機裝置的命令
- 可讓您檢視裝置整體的儀表板

在此裝置範本中, 操作員可以建立並連接實際的風扇裝置。 所有這些風扇都具有測量、屬性和命令, 供操作員用來監視和管理。 操作員可以使用裝置儀表板和表單來與風扇裝置互動。

> [!NOTE]
> 只有建置者和系統管理員可以建立、編輯和刪除裝置範本。 任何使用者都可以從現有的裝置範本, 在 [**裝置**] 頁面上建立裝置。

[IoT 隨插即用](../iot-pnp/overview-iot-plug-and-play.md)可讓 IoT Central 整合裝置, 而不需要撰寫任何內嵌的裝置程式碼。 IoT 隨插即用的核心是描述裝置功能的裝置功能模型架構。 在 IoT Central 預覽應用程式中, 裝置範本會使用這些 IoT 隨插即用裝置功能模型。

作為產生器, 您有數個選項可用於建立裝置範本:

- 在 IoT Central 中設計裝置範本, 然後在您的裝置程式碼中執行其裝置功能模型。
- 從[Azure IoT 認證裝置目錄](https://aka.ms/iotdevcat)匯入裝置功能模型, 然後新增您 IoT Central 應用程式所需的任何雲端屬性、自訂和儀表板。
- 使用 Visual Studio 程式碼建立裝置功能模型。 從模型中執行您的裝置程式碼。 手動將裝置功能模型匯入您的 IoT Central 應用程式, 然後新增您 IoT Central 應用程式所需的任何雲端屬性、自訂和儀表板。
- 使用 Visual Studio 程式碼建立裝置功能模型。 從模型中執行您的裝置程式碼, 並使用裝置第一次連線將您的實際裝置連接到 IoT Central 應用程式。 IoT Central 會為您尋找並匯入公用存放庫中的裝置功能模型。 接著, 您可以將 IoT Central 應用程式所需的任何雲端屬性、自訂和儀表板新增至裝置範本。

## <a name="create-a-device-template-from-the-device-catalog"></a>從裝置目錄建立裝置範本

身為建立者, 您可以使用[Azure Iot 裝置目錄](https://catalog.azureiotsolutions.com/alldevices)中所列的 IoT 隨插即用認證裝置, 快速開始打造您的解決方案。 IoT Central 與裝置目錄整合, 可讓您從這些 IoT 隨插即用認證的裝置匯入裝置功能模型。 若要從 IoT Central 中的其中一個裝置建立裝置範本:

1. 移至 IoT Central 應用程式中的 [**裝置範本**] 頁面。
1. 選取 [ **+ 新增**], 然後從下列類別目錄中選取任何一個 IoT 隨插即用認證的裝置。 IoT Central 會根據此裝置功能模型來建立裝置範本。
1. 將任何雲端屬性、自訂或 views 新增至您的裝置範本。
1. 選取 [**發佈**] 以發佈此裝置範本, 使其可供操作員用來查看和連接裝置。

## <a name="create-a-device-template-from-scratch"></a>從頭開始建立裝置範本

裝置範本包含:

- 一種_裝置功能模型_, 可指定裝置所執行的遙測、屬性和命令。 這些功能會組織成一或多個介面。
- 定義 IoT Central 應用程式儲存裝置相關資訊的_雲端屬性_。 例如, 雲端屬性可能會記錄裝置上次服務的資料。 此資訊永遠不會與裝置共用。
- _自訂_可讓 builder 覆寫裝置功能模型中的某些定義。 例如, 產生器可能會覆寫裝置屬性的名稱。 屬性名稱會出現在 IoT Central 儀表板和表單中。
- _儀表板和表單_可讓產生器建立 UI, 讓操作員能夠監視和管理連接至您應用程式的裝置。

在 IoT Central 中建立裝置範本:

1. 移至 IoT Central 應用程式中的 [**裝置範本**] 頁面。
1. 選取 [ **+ 新增**], 然後選取 [**自訂**]。
1. 輸入範本的 [名稱], 例如 [**環境感應器**]。
1. 按 **Enter** 鍵。 IoT Central 會建立空的裝置範本。

## <a name="manage-a-device-template"></a>管理裝置範本

您可以從範本的首頁重新命名或刪除範本。

將裝置功能模型新增至範本之後, 您就可以將它發佈。 您無法將以此範本為基礎的裝置連線到您的操作員, 直到您已發佈範本才會出現在 [**裝置**] 頁面中。

## <a name="create-a-capability-model"></a>建立功能模型

若要建立裝置功能模型, 您可以:

- 使用 IoT Central 從頭開始建立自訂模型。
- 從 JSON 檔案匯入模型。 裝置產生器可能已使用 Visual Studio Code 來撰寫應用程式的裝置功能模型。
- 從裝置目錄中選取其中一個裝置。 此選項會匯入製造商為此裝置發佈的裝置功能模型。 像這樣匯入的裝置功能模型會自動發行。

## <a name="manage-a-capability-model"></a>管理功能模型

建立裝置功能模型之後, 您可以:

- 將介面加入至模型。 模型必須至少有一個介面。
- 編輯模型中繼資料, 例如其識別碼、命名空間和名稱。
- 刪除模型。

## <a name="create-an-interface"></a>建立介面

裝置功能必須至少有一個介面。 介面是可重複使用的功能集合。

若要建立介面:

1. 移至您的裝置功能模型, 然後選擇 [ **+ 新增介面**]。

1. 在 [**選取介面**] 頁面上, 您可以:

    - 從頭開始建立自訂介面。
    - 從檔案匯入現有的介面。 裝置產生器可能已使用 Visual Studio Code 來撰寫裝置的介面。
    - 選擇其中一個標準介面, 例如**裝置資訊**介面。 標準介面會指定許多裝置通用的功能。 這些標準介面是由 Microsoft Azure IoT 發行, 無法進行版本設定或編輯。

1. 建立介面之後, 請選擇 [**編輯身分識別**] 來變更介面的顯示名稱。

1. 如果您選擇從頭開始建立自訂介面, 您可以新增裝置的功能。 裝置功能包括遙測、屬性和命令。

### <a name="telemetry"></a>遙測

遙測是從裝置傳送的值串流, 通常來自感應器。 例如, 感應器可以報告環境溫度。

下表顯示遙測功能的設定:

| 欄位 | 描述 |
| ----- | ----------- |
| 顯示名稱 | 儀表板和表單上所用遙測值的顯示名稱。 |
| Name | 遙測訊息中的功能變數名稱。 IoT Central 會從顯示名稱產生此欄位的值, 但如有必要, 您可以選擇自己的值。 |
| 功能類型 | 清單. |
| 語意類型 | 遙測的語義類型, 例如溫度、狀態或事件。 選擇的語義類型會決定下列哪一個欄位可供使用。 |
| 架構 | 遙測資料類型, 例如雙精度浮點數、字串或向量。 可用的選項取決於語義型別。 架構不適用於事件和狀態的語義類型。 |
| Severity | 僅適用于事件的語義類型。 **錯誤**、**資訊**或**警告**。 |
| 狀態值 | 僅適用于狀態語義類型。 定義可能的狀態值, 每個值都有顯示名稱、名稱、列舉型別和值。 |
| 單位 | 遙測值的單位, 例如**mph**、 **%** 或 **&deg;C**。 |
| 顯示單位 | 在儀表板和表單上使用的顯示單位。 |
| 註解 | 遙測功能的任何相關批註。 |
| 描述 | 遙測功能的描述。 |

### <a name="properties"></a>屬性

屬性代表時間點值。 例如, 裝置可以使用屬性來報告其嘗試到達的目標溫度。 您可以從 IoT Central 設定可寫入的屬性。

下表顯示內容功能的設定:

| 欄位 | 描述 |
| ----- | ----------- |
| 顯示名稱 | 在儀表板和表單上使用之屬性值的顯示名稱。 |
| Name | 屬性的名稱。 IoT Central 會從顯示名稱產生此欄位的值, 但如有必要, 您可以選擇自己的值。 |
| 功能類型 | Property. |
| 語意類型 | 屬性的語義類型, 例如溫度、狀態或事件。 選擇的語義類型會決定下列哪一個欄位可供使用。 |
| 架構 | 屬性資料類型, 例如 double、string 或 vector。 可用的選項取決於語義型別。 架構不適用於事件和狀態的語義類型。 |
| 可寫入 | 如果無法寫入屬性, 裝置可以將屬性值報告為 IoT Central。 如果此屬性為可寫入, 則裝置可以將屬性值回報給 IoT Central, IoT Central 可以將屬性更新傳送至裝置。
| Severity | 僅適用于事件的語義類型。 **錯誤**、**資訊**或**警告**。 |
| 狀態值 | 僅適用于狀態語義類型。 定義可能的狀態值, 每個值都有顯示名稱、名稱、列舉型別和值。 |
| 單位 | 屬性值的單位, 例如**mph**、 **%** 或 **&deg;C**。 |
| 顯示單位 | 在儀表板和表單上使用的顯示單位。 |
| 註解 | 屬性功能的任何相關批註。 |
| 描述 | 屬性功能的描述。 |

### <a name="commands"></a>命令

您可以從 IoT Central 呼叫裝置命令。 命令會選擇性地將參數傳遞至裝置, 並接收來自裝置的回應。 例如, 您可以在10秒內呼叫命令以重新開機裝置。

下表顯示命令功能的設定:

| 欄位 | 描述 |
| ----- | ----------- |
| 顯示名稱 | 在儀表板和表單上使用之命令的顯示名稱。 |
| Name | 命令的名稱。 IoT Central 會從顯示名稱產生此欄位的值, 但如有必要, 您可以選擇自己的值。 |
| 功能類型 | 命令 |
| 命令 | SynchronousExecutionType. |
| 註解 | 有關命令功能的任何批註。 |
| 描述 | 命令功能的描述。 |
| 要求 | 若已啟用, 則為要求參數的定義, 包括: 名稱、顯示名稱、架構、單位和顯示單位。 |
| 回應 | 若已啟用, 則為命令回應的定義, 包括: 名稱、顯示名稱、架構、單位和顯示單位。 |

## <a name="manage-an-interface"></a>管理介面

如果您尚未發佈介面, 您可以編輯介面所定義的功能。 一旦介面發佈之後, 您將需要建立新版本的裝置範本, 並將介面版本設為進行任何變更。 不需要版本控制的變更 (例如顯示名稱或單位) 可以在 [**自訂**] 區段中進行。

如果您想要在另一個功能模型中重複使用此介面, 您也可以將它匯出為 JSON 檔案。

## <a name="add-cloud-properties"></a>新增雲端屬性

使用雲端屬性, 將裝置的相關資訊儲存在 IoT Central 中。 雲端屬性永遠不會傳送至裝置。 例如, 您可以使用雲端屬性來儲存已安裝裝置的客戶名稱, 或裝置的上次維修日期。

下表顯示雲端屬性的設定:

| 欄位 | 描述 |
| ----- | ----------- |
| 顯示名稱 | 在儀表板和表單上使用之雲端屬性值的顯示名稱。 |
| Name | 雲端屬性的名稱。 IoT Central 會從顯示名稱產生此欄位的值, 但如有必要, 您可以選擇自己的值。 |
| 語意類型 | 屬性的語義類型, 例如溫度、狀態或事件。 選擇的語義類型會決定下列哪一個欄位可供使用。 |
| 架構 | 雲端屬性資料類型, 例如雙精度浮點數、字串或向量。 可用的選項取決於語義型別。 |

## <a name="add-customizations"></a>新增自訂專案

當您需要修改匯入的介面或將 IoT Central 特定功能加入功能時, 請使用自訂。 您只能自訂不會中斷介面相容性的欄位。 例如，您可以：

- 自訂功能的顯示名稱和單位。
- 新增要在圖表上顯示值時使用的預設色彩。
- 指定屬性的初始、最小和最大值。

您無法自訂功能名稱或功能類型。 如果您無法在 [**自訂**] 區段中進行變更, 您必須將裝置範本和介面的版本設為 [修改] 功能。

### <a name="generate-default-views"></a>產生預設的視圖

產生預設的視圖是快速開始進行重要裝置資訊視覺化的方式。 您的裝置範本最多會產生三個預設視圖:

1. **命令**會提供具有裝置命令的視圖, 並可讓您的操作員將它們分派至您的裝置。
1. **總覽**會提供裝置遙測的視圖, 顯示圖表和計量。
1. **關於**將會提供裝置資訊的視圖, 並顯示裝置屬性。

一旦您選取 [**產生預設的視圖**], 您就會看到它們已自動新增至裝置範本的 [ **views** ] 區段底下。

## <a name="add-dashboards"></a>新增儀表板

將儀表板新增至裝置範本, 讓操作員能夠使用圖表和計量將裝置視覺化。 裝置範本可以有多個儀表板。

若要將儀表板新增至裝置範本:

1. 移至您的裝置範本, 然後選取 [ **Views**]。
1. 然後選擇 [**視覺化裝置**]。
1. 在 [**儀表板名稱**] 中, 輸入儀表板的名稱。
1. 從靜態、屬性、雲端屬性、遙測和命令磚的清單, 將磚新增至儀表板。 拖放您想要新增至儀表板的圖格。
1. 若要在單一圖表磚上繪製多個遙測值, 請選取遙測值, 然後選取 [**合併**]。
1. 設定您新增的每個磚, 以自訂其顯示資料的方式, 方法是選取齒輪圖示, 或選取圖表磚上的 [**變更**設定] 按鈕。
1. 排列儀表板上的磚並調整其大小。
1. 儲存變更。

### <a name="configure-preview-device-to-view-dashboard"></a>設定預覽裝置以觀看儀表板

若要查看並測試您的儀表板, 您可以選取 [**設定預覽裝置**], 讓您可以看到您的操作員在發佈之後看到的儀表板。 此選項可讓您驗證您的視圖是否顯示正確的資料。 您可以從沒有預覽裝置、您為裝置範本設定的實際測試裝置, 或使用裝置識別碼的應用程式中的現有裝置進行選擇。

## <a name="add-forms"></a>新增表單

將表單新增至裝置範本, 讓操作員可以藉由查看和設定屬性來管理裝置。 操作員只能編輯雲端屬性和可寫入的裝置屬性。 裝置範本可以有多個表單。

若要將表單新增至裝置範本:

1. 移至您的裝置範本, 然後選取 [ **Views**]。
1. 然後選擇 [**編輯裝置和雲端資料**]。
1. 在 [**表單名稱**] 中輸入表單的名稱。
1. 選取要用來配置表單的資料行數目。
1. 將屬性新增至表單上的現有區段, 或選取 [屬性], 然後選擇 [**新增區段**]。 使用區段, 將表單上的屬性分組。 您可以將標題加入至區段。
1. 設定表單上的每個屬性, 以自訂其行為。
1. 在您的表單上排列屬性。
1. 儲存變更。

## <a name="publish-a-device-template"></a>發佈裝置範本

您必須先發佈裝置範本, 才能連接可執行裝置功能模型的裝置。

在您發佈裝置範本之後, 您只能對裝置功能模型進行有限的變更。 若要修改介面, 您必須[建立併發行新的版本](./howto-version-device-template-pnp.md)。

若要發佈裝置範本, 請移至您的裝置範本, 然後選取 [**發佈**]。

在您發佈裝置範本之後, 操作員可以前往 [**裝置**] 頁面, 並新增使用您裝置範本的實際或模擬裝置。 當您進行變更時, 您可以繼續修改並儲存裝置範本, 不過, 當您想要將這些變更推送至操作員, 以在 [**裝置**] 頁面下查看時, 必須選取 [**發佈**]。

## <a name="next-steps"></a>後續步驟

了解如何在 Azure IoT Central 應用程式中設定裝置範本之後，現在就可以：

> [!div class="nextstepaction"]
> [建立新的裝置範本版本](howto-version-device-template-pnp.md?toc=/azure/iot-central-pnp/toc.json&bc=/azure/iot-central-pnp/breadcrumb/toc.json)
> [將 MXChip IoT DevKit 裝置連線到您的 Azure IoT Central 應用程式](howto-connect-devkit-pnp.md?toc=/azure/iot-central-pnp/toc.json&bc=/azure/iot-central-pnp/breadcrumb/toc.json)
