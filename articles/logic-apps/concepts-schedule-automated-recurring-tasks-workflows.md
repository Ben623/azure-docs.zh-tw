---
title: 排程週期性工作和 Azure Logic Apps 中的工作流程
description: 關於排程重複執行自動化的工作、 處理序和使用 Azure Logic Apps 的工作流程概觀
services: logic-apps
ms.service: logic-apps
ms.suite: integration
author: ecfan
ms.author: estfan
ms.reviewer: deli, klam, LADocs
ms.topic: conceptual
ms.date: 05/25/2019
ms.openlocfilehash: 7f15dc5b28a44dc8405e2f0524913e6012ebe380
ms.sourcegitcommit: d4dfbc34a1f03488e1b7bc5e711a11b72c717ada
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 06/13/2019
ms.locfileid: "66356053"
---
# <a name="schedule-and-run-recurring-automated-tasks-processes-and-workflows-with-azure-logic-apps"></a>排程及執行使用 Azure Logic Apps 的週期性的自動化的工作、 處理序和工作流程

Logic Apps 可協助您建立和執行自動化週期性工作和程序的排程。 藉由建立內建循環或滑動視窗觸發程序開始，也就是排程類型的觸發程序，邏輯應用程式工作流程中，您可以執行的工作立即執行，在稍後的時間，或以循環間隔。 您可以呼叫服務內部和外部 Azure，例如 HTTP 或 HTTPS 端點，將訊息張貼到 Azure 服務，例如 Azure 儲存體和 Azure 服務匯流排，或取得上傳至檔案共用的檔案。 循環觸發程序中，您也可以設定複雜的排程和進階週期執行工作所需。 如需有關內建的排程觸發程序和動作的詳細資訊，請參閱 <<c0> [ 排程和執行週期性自動化、 工作和使用 Azure Logic Apps 的工作流程](../logic-apps/concepts-schedule-automated-recurring-tasks-workflows.md)。

以下是一些範例，示範您可以執行的工作種類：

* 取得內部的資料，例如每天執行的 SQL 預存程序。

* 取得外部資料，例如提取氣象報告的 NOAA 每隔 15 分鐘。

* 傳送報表的資料，例如電子郵件大於特定的金額在過去一週中的所有訂單的摘要。

* 處理資料，例如壓縮今天已上載映像在離峰時間的每個工作天。

* 清除資料，例如刪除所有超過 3 個月的推文。

* 封存資料，例如發送發票到備份服務在接下來的 9 個月每日的上午 1:00。

您也可以使用排程的內建動作，例如下一個動作執行之前，暫停您的工作流程：

* 等到工作日再透過電子郵件傳送狀態更新。

* 延遲工作流程，直到 HTTP 呼叫有時間來完成，才繼續進行並擷取結果。

本文說明適用於內建排程觸發程序和動作的功能。

## <a name="schedule-triggers"></a>排程觸發程序

您可以啟動邏輯應用程式工作流程使用的循環觸發程序或滑動視窗觸發程序，不與任何特定服務或系統，例如 Office 365 Outlook 或 SQL Server 相關聯。 這些觸發程序啟動，並執行您根據您指定的循環的工作流程，您可在此選取的間隔和頻率，例如秒、 分鐘和同時觸發程序的小時數或天數、 週或個月的週期觸發程序的數目。 您也可以設定開始日期和時間以及時區。 每次觸發程序引發時，Logic Apps 建立，並執行邏輯應用程式的新工作流程執行個體。

以下是這些觸發程序之間的差異：

* **循環**:在固定時間間隔，根據您指定的排程執行工作流程。 如果週期就會遺失，循環觸發程序不會處理遺失的週期，但重新啟動下一個排定的時間間隔的週期。 您可以指定開始日期和時間以及時區。 如果您選取 [天] 時，您可以指定一天的小時和分鐘的小時，例如，每天會在 2:30。 如果您選取 週 時，您也可以選取 在星期幾的資料，例如星期三與星期六。 如需詳細資訊，請參閱 <<c0> [ 建立、 排程和執行週期性工作和循環觸發程序的工作流程](../connectors/connectors-native-recurrence.md)。

* **滑動視窗**:執行您的工作流程在處理連續區塊中的資料的固定時間間隔。 如果週期就會遺失，滑動時間範圍觸發程序會恢復，並處理遺失的週期。 您可以指定開始日期和時間、 時區和延遲工作流程中的每個循環持續時間。 此觸發程序不會有選項可指定天、 週和幾個月、 一天的小時、 小時、 分鐘和每週天數。 如需詳細資訊，請參閱 <<c0> [ 建立、 排程和執行週期性工作和滑動視窗觸發程序的工作流程](../connectors/connectors-native-sliding-window.md)。

## <a name="schedule-actions"></a>排程動作

之後您的邏輯應用程式工作流程中的任何動作，您可以使用 延遲 和 延遲直到動作，讓您在下一個動作執行之前等候的工作流程。

* **延遲**:等待執行下一個動作指定的時間單位，例如秒、 分鐘、 小時、 天、 週或月數。 如需詳細資訊，請參閱 <<c0> [ 延遲工作流程中的下一個動作](../connectors/connectors-native-delay.md)。

* **延遲到**:等待執行下一個動作，直到指定的日期和時間。 如需詳細資訊，請參閱 <<c0> [ 延遲工作流程中的下一個動作](../connectors/connectors-native-delay.md)。

## <a name="patterns-for-start-date-and-time"></a>開始日期和時間的模式

<a name="start-time"></a>

以下是一些顯示您如何控制有開始日期和時間的週期和 Logic Apps 服務如何執行這些週期的模式：

| 開始時間 | 週期性無排程 | 週期性有排程 （循環觸發程序只） |
|------------|-----------------------------|----------------------------------------------------|
| {無} | 立即執行第一個工作負載。 <p>根據上次執行的時間執行未來的工作負載。 | 立即執行第一個工作負載。 <p>根據指定的排程執行未來的工作負載。 |
| 過去的開始時間 | **循環**觸發程序：根據指定的開始時間計算執行時間，並捨棄過去的執行時間。 在未來的下一個執行時間執行第一個工作負載。 <p>根據上次執行時間的計算，執行未來的工作負載。 <p><p>**滑動視窗**觸發程序：計算指定的開始時間和接受過去的執行時間為基礎的執行的時間。 <p>會根據從指定的開始時間計算未來的工作負載的執行。 <p><p>如需詳細說明，請參閱本表格後的範例。 | 根據從開始時間計算的排程，在開始時間「之後」才執行第一個工作負載  。 <p>根據指定的排程執行未來的工作負載。 <p>**附註：** 如果您指定排程的週期，但未指定排程的小時或分鐘，則未來的執行時間會分別使用第一次執行時間之後的小時或分鐘來計算。 |
| 目前或未來的開始時間 | 在指定的開始時間執行第一個工作負載。 <p>根據上次執行時間的計算，執行未來的工作負載。 | 根據從開始時間計算的排程，在開始時間「之後」才執行第一個工作負載  。 <p>根據指定的排程執行未來的工作負載。 <p>**附註：** 如果您指定排程的週期，但未指定排程的小時或分鐘，則未來的執行時間會分別使用第一次執行時間之後的小時或分鐘來計算。 |
||||

*過去的開始時間和循環但沒有排程的範例*

假設目前日期和時間會是 2017 年 9 月 8 日下午 1:00。 您在下午 2:00，也就是在過去和每 2 天執行一次循環中，指定開始日期和時間為 2017 年 9 月 7 日。

| 開始時間 | 目前時間 | 週期性 | 排程 |
|------------|--------------|------------|----------|
| 2017-09-**07**T14:00:00Z <br>(2017年-09-**07**下午 2:00) | 2017-09-**08**T13:00:00Z <br>(2017年-09-**08**下午 1:00) | 每 2 天 | {無} |
|||||

循環觸發程序中，Logic Apps 引擎會計算執行時間根據開始時間，捨棄過去的執行時間，會使用未來的下一個開始前的時間執行，並計算未來的最後一個執行階段根據執行。

此週期看起來如下：

| 開始時間 | 第一次執行時間 | 未來的執行時間 |
|------------|----------------|------------------|
| 2017-09-**07**下午 2:00 | 2017-09-**09**下午 2:00 | 2017-09-**11**下午 2:00 </br>2017-09-**13**下午 2:00 </br>2017-09-**15**下午 2:00 </br>依此類推。 |
||||

是的不論遠在您指定的開始時間，比方說，過去 2017年-09-**05**下午 2:00 或 2017年-09-**01**在下午 2:00，您的第一個一律執行下一個未來的開始時間的使用。

滑動視窗觸發程序，執行時間根據開始時間、 Logic Apps 引擎會計算過去的接受執行時間、 針對初次執行時，會使用開始時間和計算未來的開始時間為基礎的執行。

此週期看起來如下：

| 開始時間 | 第一次執行時間 | 未來的執行時間 |
|------------|----------------|------------------|
| 2017-09-**07**下午 2:00 | 2017-09-**07**下午 2:00 | 2017-09-**09**下午 2:00 </br>2017-09-**11**下午 2:00 </br>2017-09-**13**下午 2:00 </br>2017-09-**15**下午 2:00 </br>依此類推。 |
||||

是的不論遠過去您指定的開始時間，例如，2017年-09-**05**下午 2:00 或 2017年-09-**01**在下午 2:00，您第一次執行一律會使用指定的開始時間。

<a name="example-recurrences"></a>

## <a name="example-recurrences"></a>範例週期

以下是您可以設定為支援選項的觸發程序的各種範例週期：

| 觸發程序 | 週期性 | Interval | 頻率 | 開始時間 | 在這幾天內 | 在這幾小時內 | 在這幾分鐘內 | 附註 |
|---------|------------|----------|-----------|------------|---------------|----------------|------------------|------|
| 循環， <br>滑動時間範圍 | 每隔 15 分鐘執行一次 (沒有開始日期和時間) | 15 | Minute | {無} | {無法使用} | {無} | {無} | 此排程會立即開始，然後根據上次執行的時間計算未來的週期。 |
| 循環， <br>滑動時間範圍 | 每隔 15 分鐘執行一次 (有開始日期和時間) | 15 | Minute | *startDate*T*startTime*Z | {無法使用} | {無} | {無} | 此排程不會「早於」  指定的開始日期和時間開始，並且會根據上次執行的時間計算未來的週期。 |
| 循環， <br>滑動時間範圍 | 整點每小時執行一次 (有開始日期和時間) | 1 | Hour | *startDate*Thh:00:00Z | {無法使用} | {無} | {無} | 此排程不會「早於」  指定的開始日期和時間開始。 未來的週期在"00"分鐘標記，計算從開始時間執行的每個小時。 <p>如果頻率是 [週] 或 [月]，則此排程只會分別在每週的一天或每個月的一天執行。 |
| 循環， <br>滑動時間範圍 | 每天的每個小時執行一次 (沒有開始日期和時間) | 1 | Hour | {無} | {無法使用} | {無} | {無} | 此排程會立即開始，然後根據上次執行的時間計算未來的週期。 <p>如果頻率是 [週] 或 [月]，則此排程只會分別在每週的一天或每個月的一天執行。 |
| 循環， <br>滑動時間範圍 | 每天的每個小時執行一次 (有開始日期和時間) | 1 | Hour | *startDate*T*startTime*Z | {無法使用} | {無} | {無} | 此排程不會「早於」  指定的開始日期和時間開始，並且會根據上次執行的時間計算未來的週期。 <p>如果頻率是 [週] 或 [月]，則此排程只會分別在每週的一天或每個月的一天執行。 |
| 循環， <br>滑動時間範圍 | 每小時的整點過後，每隔 15 分鐘執行一次 (有開始日期和時間) | 1 | Hour | *startDate*T00:15:00Z | {無法使用} | {無} | {無} | 此排程不會「早於」  指定的開始日期和時間開始。 未來的週期在"15"分鐘標記，從一開始會計算執行時間，因此上午 00:15、 上午 1:15、 上午 2:15，依此類推。 |
| 週期性 | 每小時的整點過後，每隔 15 分鐘執行一次 (沒有開始日期和時間) | 1 | 天 | {無} | {無法使用} | 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23 | 15 | 此排程在上午 00:15、上午 1:15、上午 2:15 (依此類推) 執行。 而且，此排程相當於「小時」的頻率，且開始時間為 "15" 分鐘。 |
| 週期性 | 在指定分鐘的標記 （沒有開始日期和時間） 中執行每隔 15 分鐘。 | 1 | 天 | {無} | {無法使用} | 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23 | 0, 15, 30, 45 | 此排程會在到達下一個指定的 15 分鐘標記處開始。 |
| 週期性 | 每天上午 8:00 執行 (沒有開始日期和時間) | 1 | 天 | {無} | {無法使用} | 8 | {無} | 此排程根據指定的排程，在每天的上午 8:00 執行。 |
| 週期性 | 每天上午 8:00 執行 (有開始日期和時間) | 1 | 天 | *startDate*T08:00:00Z | {無法使用} | {無} | {無} | 此排程根據指定的開始時間，在每天的上午 8:00 執行。 | 
| 週期性 | 每天上午 8:30 執行 (沒有開始日期和時間) | 1 | 天 | {無} | {無法使用} | 8 | 30 | 此排程根據指定的排程，在每天的上午 8:30 執行。 |
| 週期性 | 每天上午 8:30 執行 (有開始日期和時間) | 1 | 天 | *startDate*T08:30:00Z | {無法使用} | {無} | {無} | 此排程在指定開始日期的上午 8:30 開始。 |
| 週期性 | 每天上午 8:30 和下午 4:30 執行 | 1 | 天 | {無} | {無法使用} | 8, 16 | 30 | |
| 週期性 | 每天上午 8:30、上午 8:45、下午 4:30 及下午 4:45 執行 | 1 | 天 | {無} | {無法使用} | 8, 16 | 30, 45 | |
| 週期性 | 每個星期六的下午 5 點執行 (沒有開始日期和時間) | 1 | 週 | {無} | "Saturday" | 17 | 00 | 此排程在每個星期六的下午 5:00 執行。 |
| 週期性 | 每個星期六的下午 5 點執行 (有開始日期和時間) | 1 | 週 | *startDate*T17:00:00Z | "Saturday" | {無} | {無} | 此排程不會「早於」  指定的開始日期和時間開始，在此案例中是 2017 年 9 月 9 日下午 5:00。 未來會在每個星期六的下午 5:00 重複執行。 |
| 週期性 | 每個星期二、星期四的下午 5 點執行 | 1 | 週 | {無} | "Tuesday", "Thursday" | 17 | {無} | 此排程在每個星期二和星期四的下午 5:00 執行。 |
| 週期性 | 在工作時間內的每小時執行一次 | 1 | 週 | {無} | 選取除了星期六和星期日以外的所有日子。 | 選取您想要的整點。 | 選取您想要的任何分鐘。 | 例如，如果您的工作時間是上午 8:00 到下午 5:00，則請選取 "8, 9, 10, 11, 12, 13, 14, 15, 16, 17" 作為整點。 <p>如果您的工作時間是上午 8:30 到下午 5:30，則請選取之前的整點，加上 "30" 作為分鐘。 |
| 週期性 | 週末每天執行一次 | 1 | 週 | {無} | "Saturday", "Sunday" | 選取您想要的整點。 | 視需要選取任何分鐘。 | 此排程會在每個星期六和星期日的指定排程執行。 |
| 週期性 | 只在隔週星期一的每隔 15 分鐘執行一次 | 2 | 週 | {無} | "Monday" | 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23 | 0, 15, 30, 45 | 此排程會在每個其他星期一的每隔 15 分鐘標記處執行一次。 |
| 週期性 | 執行每個月 | 1 | 月 | *startDate*T*startTime*Z | {無法使用} | {無法使用} | {無法使用} | 此排程未啟動*更快*超出指定的開始日期和時間，而開始日期和時間計算未來的週期。 如果您未指定開始日期和時間，則此排程會使用建立日期和時間。 |
| 週期性 | 每個月其中一天的每小時執行一次 | 1 | 月 | {請參閱注意} | {無法使用} | 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23 | {請參閱注意} | 如果您未指定開始日期和時間，則此排程會使用建立日期和時間。 若要控制重複排程的分鐘，請指定分鐘、開始時間，或使用建立時間。 例如，如果開始時間或建立時間是上午 8:25，則此排程會在上午 8:25、上午 9:25、上午 10:25 (依此類推) 執行。 |
|||||||||

<a name="run-once"></a>

## <a name="run-one-time-only"></a>執行一次

如果您想要執行您的邏輯應用程式，只有一次在未來，您可以使用**排程器：執行作業一次**範本。 建立新的邏輯應用程式之後，但下開啟 Logic Apps 設計工具中前,**範本**區段中，從**分類**清單中，選取**排程**，然後選取此範本：

![選取 [排程器：執行作業一次] 範本](./media/concepts-schedule-automated-recurring-tasks-workflows/choose-run-once-template.png)

或者，如果您可以啟動您的邏輯應用程式**收到 HTTP 要求時-要求**觸發程序，並將開始時間傳遞做為觸發程序的參數。 第一個動作，使用**延遲到-排定**動作，並提供下一個動作開始執行時的時間。

## <a name="next-steps"></a>後續步驟

* [建立、 排程及執行週期性工作和工作流程的循環觸發程序](../connectors/connectors-native-recurrence.md)
* [建立、 排程及執行週期性工作和工作流程的滑動時間範圍觸發程序](../connectors/connectors-native-sliding-window.md)
* [使用延遲動作的暫停工作流程](../connectors/connectors-native-delay.md)