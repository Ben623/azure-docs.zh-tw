---
title: 功能雜湊:模組參考
titleSuffix: Azure Machine Learning service
description: 瞭解如何在 Azure Machine Learning 服務中使用特徵雜湊模組來為文字資料進行特徵化。
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: reference
author: xiaoharper
ms.author: zhanxia
ms.date: 09/01/2019
ms.openlocfilehash: 78d01cf071faed312773ebf12c75e7e6e5596e71
ms.sourcegitcommit: d470d4e295bf29a4acf7836ece2f10dabe8e6db2
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/02/2019
ms.locfileid: "70210841"
---
# <a name="feature-hashing"></a>功能雜湊

本文描述適用于 Azure Machine Learning 服務的視覺化介面 (預覽) 模組。

使用「**特徵雜湊**」模組, 將英文文字的資料流程轉換成一組整數特徵。 接著, 您可以將此雜湊功能集傳遞至機器學習演算法, 以將文字分析模型定型。

此課程模組中所提供的功能雜湊功能是以 nimbusml 架構為基礎。 如需詳細資訊, 請參閱[NgramHash 類別](https://docs.microsoft.com/python/api/nimbusml/nimbusml.feature_extraction.text.extractor.ngramhash?view=nimbusml-py-latest)。

## <a name="what-is-feature-hashing"></a>什麼是功能雜湊

特徵雜湊的運作方式是將唯一的 token 轉換成整數。 它會在您提供做為輸入的確切字串上運作, 而且不會執行任何語言分析或前置處理。 

例如, 採用一組像這些的簡單句子, 後面接著情感分數。 假設您想要使用此文字來建立模型。

|USERTEXT|情感|
|--------------|---------------|
|我喜歡這本書|3|
|我恨透了臺本書|1|
|本書很棒|3|
|我喜歡書籍|2|

就內部而言,**特徵雜湊**模組會建立 n 字母的字典。 例如, 此資料集的 bigrams 清單可能如下所示:

|詞彙 (bigrams)|FREQUENCY|
|------------|---------------|
|本書|3|
|我喜歡|1|
|我恨透了台|1|
|我愛|1|

您可以使用 [ **n-克**] 屬性來控制 n 字母的大小。 如果您選擇 bigrams, unigrams 也會計算出來。 字典也會包含如下所示的單一詞彙:

|詞彙 (unigrams)|FREQUENCY|
|------------|---------------|
|帳面|3|
|I|3|
|通訊錄|1|
|為|1|

建立字典之後,**特徵雜湊**模組會將字典詞彙轉換成雜湊值。 然後, 它會計算是否在每個案例中使用了某項功能。 針對每個文字資料列, 此模組會輸出一組資料行, 每個雜湊特徵各一個資料行。

例如, 在雜湊之後, 功能資料行看起來可能像這樣:

|Rating|雜湊功能1|雜湊功能2|雜湊功能3|
|-----|-----|-----|-----|
|4|1|1|0|
|5|0|0|0|

* 如果資料行中的值為 0, 則資料列不會包含雜湊的功能。
* 如果值為 1, 資料列就會包含功能。

「特徵雜湊」可讓您將可變長度的文字檔表示為相等長度的數值特徵向量, 以達成維度縮減。 如果您嘗試將 [文字] 資料行用於定型, 則會被視為具有許多相異值的類別特徵資料行。

數值輸出也能讓您使用常見的機器學習方法, 包括分類、叢集和資訊抓取。 因為查閱作業可以使用整數雜湊而不是字串比較, 所以取得功能權數的速度也會更快。

## <a name="configure-feature-hashing"></a>設定功能雜湊

1.  將**特徵雜湊**模組新增至您在視覺介面中的實驗。

1. 連接包含您想要分析之文字的資料集。

    > [!TIP]
    > 因為功能雜湊不會執行詞幹分析或截斷之類的詞彙作業, 所以在套用功能雜湊之前, 您有時可以執行文字前置處理來取得更好的結果。 

1. 將**目標資料行**設定為您想要轉換成雜湊功能的文字資料行。 

    * 資料行必須是字串資料類型。
    
    * 選擇多個文字資料行可能會對功能維度造成重大影響。 例如, 10 位雜湊的資料行數目會從1024到兩個數據行的單一資料行變成2048。

1. 使用 [**雜湊 bitsize** ] 來指定建立雜湊表時要使用的位數。
    
    預設的位大小為10。 對於許多問題而言, 這個值就已足夠。 您可能需要更多空間來避免發生衝突, 視定型文字 n 字母元詞彙的大小而定。
    
1. 針對**n**個字母, 請輸入一個數位, 以定義要加入至定型字典的 N 字母長度上限。 N-克是一系列的*n*個單字, 視為唯一的單位。

    例如, 如果您輸入 3, 則會建立 unigrams、bigrams 和 trigrams。

1. 執行實驗。

## <a name="results"></a>結果

處理完成之後, 此模組會輸出已轉換的資料集, 其中原始文字資料行已轉換成多個資料行, 每個都代表文字中的一項功能。 視字典的重要性而定, 產生的資料集可能會很大:

|資料行名稱1|資料行類型2|
|-------------------|-------------------|
|USERTEXT|原始資料行|
|情感|原始資料行|
|USERTEXT-雜湊功能1|雜湊特徵資料行|
|USERTEXT-雜湊功能2|雜湊特徵資料行|
|USERTEXT 雜湊功能 n|雜湊特徵資料行|
|USERTEXT-雜湊功能1024|雜湊特徵資料行|

建立已轉換的資料集之後, 您可以使用它做為「定型模型」模組的輸入。
 
### <a name="best-practices"></a>最佳做法

下列最佳作法可協助您充分運用**功能雜湊**模組:

* 先加入前置處理**文字**模組, 再使用**特徵雜湊**預先處理輸入文字。 

* 在**特徵雜湊**模組後面新增**選取資料行**模組, 以從輸出資料集移除文字資料行。 產生雜湊功能之後, 您不需要文字資料行。
    
* 請考慮使用這些文字前置處理選項, 以簡化結果並改善正確性:

    * 斷字
    * 停用字詞移除
    * 大小寫正規化
    * 移除標點符號和特殊字元
    * 詞幹分析  

適用于任何個別解決方案的一組最佳前置處理方法, 取決於網域、詞彙和商務需求。 實驗您的資料, 以查看哪些文字處理方法最有效。

## <a name="next-steps"></a>後續步驟
            
請參閱可用來 Azure Machine Learning 服務的[模組集合](module-reference.md)。 
