---
title: 資料分割和取樣：模組參考
titleSuffix: Azure Machine Learning service
description: 了解如何使用 Azure Machine Learning 服務中的資料分割和取樣的模組進行取樣的資料集，或從您的資料集建立資料分割。
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: reference
author: xiaoharper
ms.author: zhanxia
ms.date: 05/02/2019
ROBOTS: NOINDEX
ms.openlocfilehash: 72f9e11e3582d804eecc7479ea079276564bd12f
ms.sourcegitcommit: d4dfbc34a1f03488e1b7bc5e711a11b72c717ada
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 06/13/2019
ms.locfileid: "65029276"
---
# <a name="partition-and-sample-module"></a>資料分割和取樣的模組

本文說明 Azure Machine Learning 服務的視覺化介面 （預覽） 的模組。

在資料集上執行取樣，或從您的資料集建立資料分割，請使用此模組。

取樣是重要的工具，在機器學習，因為它可讓您同時維持相同值的比例減少資料集的大小。 這個模組支援機器學習服務中重要的幾個相關的工作： 

- 將您的資料分割成多個相同大小的小節中。 

    交叉驗證，或將案例指派給隨機的群組，您可以使用資料分割。

- 將資料分成群組，然後使用從特定群組的資料。 

    之後會隨機指派給不同群組的情況下，您可能需要修改與只有一個群組相關聯的功能。

- 取樣。 

    您可以擷取資料的百分比、 適用於隨機取樣，或選擇要用於平衡資料集和其值上執行分層的取樣的資料行。

- 建立較小的資料集進行測試。 

    如果您有大量資料時，您可能想要使用的第一個*n*設定實驗，然後再切換到在建置您的模型時，請使用完整的資料集時的資料列。 您也可以使用取樣來建立 s 使用的較小資料集，在開發過程中。

## <a name="configure-partition-and-sample"></a>設定資料分割和取樣

這個模組支援多個方法，將您的資料分割成資料分割或取樣。 首先，選擇的方法，然後設定其他選項所需的方法。

- 前端
- 取樣
- 指派給摺疊
- 挑選摺疊

### <a name="get-top-n-rows-from-a-dataset"></a>取得從資料集的前 n 個資料列

使用此模式可取得的第一個*n*資料列。 如果您想要測試的一小部分的資料列，實驗，而且不需要平衡或以任何方式取樣資料，這個選項非常有用。

1. 新增**資料分割和取樣**在介面中，在實驗的模組，並連接資料集。  

2. **資料分割或取樣模式**:此選項設定為**Head**。

3. **若要選取的資料列數目**:輸入要傳回的資料列數目。

    您指定的資料列數目必須為非負整數。 如果選取的資料列數目大於資料集中的資料列數目，則會傳回整個資料集。

4. 執行實驗。

此模組會輸出包含只指定的數目的資料列的單一資料集。 資料列的讀取一律從頂端的 資料集。

### <a name="create-a-sample-of-data"></a>建立資料的範例

此選項支援簡單的隨機取樣或分層的隨機取樣。 這非常有用，如果您想要建立較小的代表性的樣本資料集進行測試。

1. 新增**資料分割和取樣**模組至您的實驗，並連接資料集。

2. **資料分割或取樣模式**:將此設為**取樣**。

3. **取樣率**:輸入介於 0 和 1 之間的值。 這個值會指定從來源資料集應該包含輸出資料集中的資料列百分比。

    例如，如果您想只是一半的原始資料集，請輸入`0.5`表示取樣率應該 50%。

    輸入資料集的資料列會隨機，並選擇性地放入輸出資料集，根據指定的比率。

4. **隨機取樣的種子**:選擇性地輸入要做為種子值的整數。

    這個選項非常重要，如果您想要分割方式每次為相同的資料列。 預設值為 0，會產生的起始種子的意義會根據系統時鐘。 這可能會導致稍微不同的結果每次執行實驗。

5. **取樣的分層的分割**:如果，選取此選項很重要，在資料集中的資料列應該除以平均取樣之前某些索引鍵資料行。

    針對**取樣分層索引鍵資料行**，選取單一*分層資料行*分割資料集時使用。 在資料集中的資料列然後分為，如下所示：

    1. 所有輸入資料列分組 （分層） 中的指定的分層資料行的值。

    2. 每個群組內的資料列打散。

    3. 每個群組選擇性地加入輸出資料集，以符合指定的比率。


6. 執行實驗。

    使用此選項時，此模組會輸出單一資料集，其中包含資料的代表性取樣。 資料集的其餘、 以部分不在輸出中。 

## <a name="split-data-into-partitions"></a>資料分割的資料分割

當您想要將資料集分割成的資料子集，請使用此選項。 當您想要建立的自訂交叉驗證摺疊數，或分成數個群組中的資料列時，此選項也很有用。

1. 新增**資料分割和取樣**模組至您的實驗，並連接資料集。

2. 針對**磁碟分割或範例模式**，選取**指派給摺疊**。

3. **使用資料分割中的取代項目**:如果您想要取樣的資料列，將會放回集區的潛在的重複使用的資料列，請選取此選項。 如此一來，相同的資料列可能會指派給數個摺疊。

    如果您不要使用取代 （預設選項），取樣的資料列不放回集區的潛在的重複使用的資料列。 如此一來，每個資料列可以指派給一個摺疊。

4. **隨機的分割**:如果您想要隨機指派給摺疊資料列，請選取此選項。

    如果您未選取此選項，就會將資料列指派給摺疊數使用的循環配置資源方法。

5. **隨機種子**:選擇性地輸入要做為種子值的整數。 這個選項非常重要，如果您想要分割方式每次為相同的資料列。 否則，預設值 0 表示的隨機將用於啟動種子。

6. **指定分割器方法**:指出您要如何資料分配給每個資料分割中，使用下列選項：

    - **平均分割**:使用此選項，將相同數目的資料列中每個資料分割。 若要指定輸出資料分割數目，請輸入 之間的整數**指定平均分割成的摺疊數**文字方塊。

    - **具有自訂比例的資料分割**:使用此選項，以每個分割區大小指定為逗號分隔的清單。

        例如，如果您想要建立三個資料分割，第一個資料分割包含 50%的資料，與其餘的兩個分割區資料，每個包含 25%按一下**逗號分隔清單的比例** 文字方塊中，並輸入這些數字： `.5, .25, .25`

        所有的資料分割大小的總和必須新增最多只有 1 個。

        - 如果您輸入的號碼，總計達**小於 1**，額外的分割區會建立來儲存剩餘的資料列。 比方說，如果您輸入值.2 和.3、 第三個資料分割建立所在之剩餘的 50%的所有資料列。

        - 如果您輸入的號碼，總計達**1 個以上**，當您執行實驗時，會引發錯誤。

7. **分層的分割**:選取此選項，如果您想要的資料列 （stratified sampling） 當分割，然後再選擇_分層資料行_。

8. 執行實驗。

    使用此選項時，此模組會輸出多個資料集，使用您所指定的規則分割。

### <a name="use-data-from-a-predefined-partition"></a>使用預先定義的資料分割的資料  

當您已將資料集分成多個資料分割，而現在想要依序載入每個資料分割，進行進一步的分析或處理時，會使用此選項。

1. 新增**資料分割和取樣**實驗的模組。

2. 將它連線到上一個執行個體的輸出**資料分割和取樣**。 必須使用該執行個體**指派給摺疊**選項來產生某些資料分割數目。

3. **資料分割或取樣模式**:選取 **挑選摺疊**。

4. **指定要取樣的哪個摺疊**:選取分割區使用的索引。 分割區索引是以 1 為基礎。 比方說，如果您將資料集分成三個部分時，資料分割必須 1、 2 和 3 的索引。

    如果您輸入無效的索引值，則會產生設計階段錯誤：「 錯誤 0018:資料集包含無效的資料。 」

    除了摺疊的群組資料集，您可以將資料集分成兩個群組： 的目標摺疊，以及其他項目。 若要執行這項操作，輸入索引的單一的摺疊，然後選取  選項，**挑選所選摺疊的補充**，以取得資料以外的所有內容中所指定的摺疊。

5. 如果您正在使用多個資料分割，您必須加入額外的執行個體的**資料分割和取樣**模組來處理每個資料分割。

    例如，使用年齡的四個摺疊成假設先前資料分割的病患。 若要使用每個個別的摺疊，您會需要四個複本**資料分割和取樣**模組，並在每個，您選取不同的摺疊，如下所示。 不是使用正確**指派給摺疊**直接輸出。  

    [![資料分割和取樣](./media/partition-and-sample/partition-and-sample.png)](./media/partition-and-sample/partition-and-sample-lg.png#lightbox)

5. 執行實驗。

    使用此選項時，此模組會輸出包含指派給該摺疊的資料列的單一資料集。

> [!NOTE]
>  您無法直接; 檢視摺疊標記它們會出現只在中繼資料。

## <a name="next-steps"></a>後續步驟

請參閱[可用的模組集](module-reference.md)Azure Machine Learning 服務。 