---
title: 分割資料：模組參考
titleSuffix: Azure Machine Learning
description: 瞭解如何使用 Azure Machine Learning 中的分割資料模組，將資料集分割成兩個不同的集合。
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: reference
author: likebupt
ms.author: keli19
ms.date: 10/22/2019
ms.openlocfilehash: d889cd3325784f564d03e5d75dde1ec760c66804
ms.sourcegitcommit: d45fd299815ee29ce65fd68fd5e0ecf774546a47
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 03/04/2020
ms.locfileid: "78268528"
---
# <a name="split-data-module"></a>分割資料模組

本文說明 Azure Machine Learning 設計工具（預覽）中的模組。

使用此模組，將資料集分成兩個不同的集合。

當您需要將資料分成定型集和測試集時，此模組特別有用。 您也可以自訂分割資料的方式。 有些選項支援亂數據，其他則是針對特定資料類型或模型類型而量身打造。

## <a name="how-to-configure"></a>如何設定

> [!TIP]
> 選擇分割模式之前，請先閱讀所有選項，以決定所需的分割類型。
> 如果您變更分割模式，所有其他選項都可能會重設。

1. 將**分割資料**模組新增至您在設計工具中的管線。 您可以在 [**資料轉換**] 下的 [**範例和分割**] 分類中找到此模組。

2. **分割模式**：選擇下列其中一個模式，視您擁有的資料類型，以及您要將它分割的方式而定。 每個分割模式都有不同的選項。 如需詳細的指示和範例，請按一下下列主題。 

    - **分割資料列**：如果您只想要將資料分成兩個部分，請使用此選項。 您可以指定要放入每個分割中的資料百分比，但根據預設，資料會分割為50-50。

        您也可以在每個群組中隨機化選取的資料列，並使用分層取樣。 在分層取樣中，您必須選取您想要在兩個結果資料集之間平均分配值的單一資料行。  

    - **正則運算式分割** 當您想要藉由測試單一資料行的值來分割資料集時，請選擇此選項。

        例如，如果您要分析情感，您可以在文字欄位中檢查特定產品名稱是否存在，然後將資料集分割成具有目標產品名稱的資料列，而不使用。

    - **相對運算式分割**：每當您想要將條件套用至數位資料行時，請使用此選項。 數位可以是日期/時間欄位、包含年齡或金額的資料行，或甚至是百分比。 例如，您可能會想要根據專案的成本來分割資料集、依年齡範圍將人員分組，或依行事曆日期來分隔資料。

### <a name="split-rows"></a>分割資料列

1.  將 [[分割資料](./split-data.md)] 模組加入至設計工具中的管線，然後連接您要分割的資料集。
  
2.  在 [**分割模式]** 中，選擇 [**分割資料列**]。 

3.  **第一個輸出資料集中的資料列分數**。 使用此選項來判斷要進入第一個（左側）輸出的資料列數目。 所有其他資料列都會移至第二個（右手邊）輸出。

    比率代表傳送至第一個輸出資料集的資料列百分比，因此您必須輸入介於0到1之間的十進位數。
     
     例如，如果輸入的值為 0.75，則會以 75:25 的比率來分割資料集，亦即 75% 的資料列會傳送至第一個輸出資料集，而 25% 會傳送至第二個輸出資料集。
  
4. 如果您想要將資料隨機選取到這兩個群組，請選取 [**隨機分割**] 選項。 這是建立定型和測試資料集時的慣用選項。

5.  **隨機種子**：輸入非負整數值，初始化要使用之實例的偽亂數序列。 所有會產生隨機數字的模組中都使用此預設種子。 

     指定種子可讓結果通常重現。 如果您需要重複分割作業的結果，您應該指定亂數產生器的種子。 否則隨機種子會預設為 0，表示從系統時鐘取得初始種子值。 如此一來，每次執行分割時，資料分佈可能稍有不同。 

6. **分層 split**：將此選項設定為**True** ，以確保兩個輸出資料集包含*分層資料行*或分層索引鍵資料*行*中值的代表性樣本。 

    使用分層取樣時，資料會進行分割，讓每個輸出資料集的每個目標值大致上都有相同的百分比。 例如，您可能會想要確保您的定型和測試集大致上與結果有關，或與其他一些資料行（例如性別）有關。

7. 執行管道。


## <a name="regular-expression-split"></a>正則運算式分割

1.  將[分割資料](./split-data.md)模組新增至您的管線，並將其當做輸入連接至您想要分割的資料集。  
  
2.  針對 [**分割模式]** ，選取 [**正則運算式分割**]。

3. 在 [**正則運算式**] 方塊中，輸入有效的正則運算式。 
  
   正則運算式應遵循 Python 正則運算式語法。


4. 執行管道。

    根據您所提供的正則運算式，資料集會分成兩組資料列：值符合運算式和所有剩餘資料列的資料列。 

下列範例示範如何使用**正則運算式**選項來分割資料集。 

### <a name="single-whole-word"></a>單一全字 

這個範例會將包含 `Gryphon` 資料行中之文字的所有資料列放入第一個資料集 `Text`中，並將其他資料列放入**分割資料**的第二個輸出中：

```text
    \"Text" Gryphon  
```

### <a name="substring"></a>Substring

這個範例會在資料集的第二個數據行內的任何位置尋找指定的字串，在此以索引值1表示。 比對會區分大小寫。

```text
(\1) ^[a-f]
```

第一個結果資料集包含索引資料行以下列其中一個字元開頭的所有資料列： `a`、`b`、`c`、`d`、`e`、`f`。 所有其他資料列都會導向至第二個輸出。

## <a name="relative-expression-split"></a>相對運算式分割。

1. 將[分割資料](./split-data.md)模組新增至您的管線，並將其當做輸入連接至您想要分割的資料集。
  
2. 針對 [**分割模式]** ，選取 [**相對運算式分割**]。
  
3. 在 [**關聯式運算式**] 文字方塊中，輸入在單一資料行上執行比較運算的運算式：

   針對 [**數值**] 資料行：
   - 資料行包含任何數值資料類型的數位，包括日期和時間資料類型。
   - 運算式最多隻能參考一個資料行名稱。
   - 針對和作業，請使用連字號 `&`。 使用管線字元 `|` 進行或運算。
   - 支援下列運算子： `<`、`>`、`<=`、`>=`、`==`、`!=`。
   - 您無法使用 `(` 和 `)`來分組作業。
   
   針對**字串資料行**：
   - 支援下列運算子： `==`、`!=`。

4. 執行管道。

    運算式會將資料集分割成兩組資料列：具有符合條件之值的資料列，以及所有剩餘的資料列。

下列範例示範如何使用**分割資料**模組中的**相對運算式**選項來分割資料集：  

### <a name="using-calendar-year"></a>使用行事歷年度

常見的案例是依年份分割資料集。 下列運算式會選取資料行中的值 `Year` 大於 `2010`的所有資料列。

```text
\"Year" > 2010
```

日期運算式必須考慮包含在資料行中的所有日期部分，而且資料行中的日期格式必須一致。 

例如，在使用格式 `mmddyyyy`的日期資料行中，運算式應如下所示：

```text
\"Date" > 1/1/2010
```

### <a name="using-column-indices"></a>使用資料行索引

下列運算式示範如何使用資料行索引，在資料集的第一個資料行中選取所含的值小於或等於為 30、但不等於 20 的所有資料列。

```text
(\0)<=30 & !=20
```


## <a name="next-steps"></a>後續步驟

請參閱可用來 Azure Machine Learning 的[模組集合](module-reference.md)。 
